<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Results</title>
    <style>
        body {
            font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            line-height: 1.5;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f5f5;
        }
        
        .test-case {
            background: white;
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        .test-description {
            color: #444;
            margin-bottom: 15px;
            font-size: 0.95em;
        }

        .results-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
            padding: 10px;
        }

        .result-card {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 6px;
            border: 1px solid #dee2e6;
        }

        .result-title {
            font-weight: 500;
            color: #495057;
            margin-bottom: 8px;
        }

        .result-content {
            color: #666;
            font-size: 0.9em;
        }
    </style>
</head>
<body>
    <div id="results"></div>

    <script>
        function displayResults(results) {
            const resultsContainer = document.getElementById('results');
            
            results.forEach(test => {
                const testElement = document.createElement('div');
                testElement.className = 'test-case';
                
                testElement.innerHTML = `
                    <div class="test-description">${test.testDescription}</div>
                    <div class="results-grid">
                        ${test.iterations.map(iteration => `
                            <div class="result-card">
                                <div class="result-title">Result</div>
                                <div class="result-content">
                                    <p><strong>Title:</strong> ${iteration.primaryAgent.title}</p>
                                    <p><strong>Body:</strong> ${iteration.primaryAgent.body}</p>
                                    <p><strong>In-App:</strong> ${iteration.primaryAgent.inAppMessage}</p>
                                </div>
                            </div>
                        `).join('')}
                    </div>
                `;
                
                resultsContainer.appendChild(testElement);
            });
        }

        // Test data
        const testData = {
            "results":[
    {
      "testName": "test a case where low price has not changed but max discount percentage has",
      "testDescription": "The push notification is regarding the show \"Back to the Future,\" where regular tickets are priced as low as $63. A new maximum discount percentage of 29% has been introduced.",
      "iterations": [
        {
          "primaryAgent": {
            "title": "Back to the Future",
            "body": "Experience the future at an exciting entry price now from $63.",
            "inAppMessage": "Back to the Future tix now from $63.",
            "usage": {
              "prompt_tokens": 922,
              "completion_tokens": 114,
              "total_tokens": 1036
            }
          },
          "evaluatorAgent": {
            "response": "HALLUCINATION: No % symbol shown despite canShowDiscountPercentage=true",
            "usage": {
              "prompt_tokens": 310,
              "completion_tokens": 15,
              "total_tokens": 325
            }
          }
        },
        {
          "primaryAgent": {
            "title": "Back to the Future",
            "body": "Experience time travel with tickets from $63!",
            "inAppMessage": "Back to the Future tickets from $63. Don't miss the adventure!",
            "usage": {
              "prompt_tokens": 922,
              "completion_tokens": 116,
              "total_tokens": 1038
            }
          },
          "evaluatorAgent": {
            "response": "VALID: All numbers and conditions match source data.",
            "usage": {
              "prompt_tokens": 306,
              "completion_tokens": 10,
              "total_tokens": 316
            }
          }
        },
        {
          "primaryAgent": {
            "title": "Back to the Future",
            "body": "Get tickets from $63 before they go.",
            "inAppMessage": "Back to the Future tickets from $63 available now",
            "usage": {
              "prompt_tokens": 922,
              "completion_tokens": 113,
              "total_tokens": 1035
            }
          },
          "evaluatorAgent": {
            "response": "VALID: Matches lowPriceForRegularTickets and canShowDiscountPercentage=true.",
            "usage": {
              "prompt_tokens": 306,
              "completion_tokens": 15,
              "total_tokens": 321
            }
          }
        }
      ],
      "hallucination_summary": {
        "status": "FAIL",
        "hallucinations_detected": 1,
        "total_iterations": 3
      }
    },
    {
      "testName": "test NYC case where there is a promotion, max discount amount and low price",
      "testDescription": "The show \"MJ The Musical\" has a promotion titled \"Cyber Sale\" offering limited-time savings. The new lowest price for regular tickets is $89, with a $5 decrease from the previous price. The maximum discount amount available is $25, which is a $7 increase from before. The promotion includes a maximum discount percentage of 30%.",
      "iterations": [
        {
          "primaryAgent": {
            "title": "MJ The Musical",
            "body": "Cyber Sale: Grab tickets from $89. Limited time offer!",
            "inAppMessage": "MJ The Musical Cyber Sale Grab tickets from $89 now",
            "usage": {
              "prompt_tokens": 1084,
              "completion_tokens": 111,
              "total_tokens": 1195
            }
          },
          "evaluatorAgent": {
            "response": "VALID: All numbers and details match source data.",
            "usage": {
              "prompt_tokens": 471,
              "completion_tokens": 10,
              "total_tokens": 481
            }
          }
        },
        {
          "primaryAgent": {
            "title": "MJ The Musical",
            "body": "Limited time Cyber Sale! Unlock savings and grab your tix now.",
            "inAppMessage": "MJ The Musical: Cyber Sale savings active, get your tickets!",
            "usage": {
              "prompt_tokens": 1084,
              "completion_tokens": 117,
              "total_tokens": 1201
            }
          },
          "evaluatorAgent": {
            "response": "HALLUCINATION: No % or $ amounts mentioned in the push notification.",
            "usage": {
              "prompt_tokens": 472,
              "completion_tokens": 16,
              "total_tokens": 488
            }
          }
        },
        {
          "primaryAgent": {
            "title": "MJ The Musical",
            "body": "Cyber Sale: Get your tickets now from $89, limited time offer!",
            "inAppMessage": "MJ The Musical Cyber Sale tix from $89 limited time!",
            "usage": {
              "prompt_tokens": 1084,
              "completion_tokens": 118,
              "total_tokens": 1202
            }
          },
          "evaluatorAgent": {
            "response": "VALID: All numbers match source data, % symbol shown as allowed.",
            "usage": {
              "prompt_tokens": 473,
              "completion_tokens": 14,
              "total_tokens": 487
            }
          }
        }
      ],
      "hallucination_summary": {
        "status": "FAIL",
        "hallucinations_detected": 1,
        "total_iterations": 3
      }
    },
    {
      "testName": "test a case where a show has breaking news",
      "testDescription": "\"Harry Potter and the Cursed Child\" will debut a new version on Broadway at the Lyric Theatre starting November 12. The play, which originally opened in New York in 2018 as a two-part, five-hour production, was revised in 2021 to a one-part, 3.5-hour show. The upcoming 2024 version will run under three hours, including one intermission. The new cast includes Matthew James Thomas as Harry Potter, Sarah Killough as Ginny Potter, and Alex Serino as Albus Potter, among others. The story, written by Jack Thorne and based on an original story by Thorne, J.K. Rowling, and John Tiffany, follows Albus Potter and Scorpius Malfoy on a time-traveling adventure. Regular ticket prices start at $63.",
      "iterations": [
        {
          "primaryAgent": {
            "title": "Harry Potter and the Cursed Child",
            "body": "A new version debuts Nov 12 at Lyric Theatre with a fresh cast!",
            "inAppMessage": "Harry Potter and the Cursed Child debuts soon with a new cast!",
            "usage": {
              "prompt_tokens": 1465,
              "completion_tokens": 139,
              "total_tokens": 1604
            }
          },
          "evaluatorAgent": {
            "response": "VALID: Matches show name, date, and location. No % symbol used.",
            "usage": {
              "prompt_tokens": 860,
              "completion_tokens": 16,
              "total_tokens": 876
            }
          }
        },
        {
          "primaryAgent": {
            "title": "Harry Potter and the Cursed Child",
            "body": "Exciting news! A new version coming November 12. Secure tickets from $63.",
            "inAppMessage": "Harry Potter and the Cursed Child: New version debuts Nov 12.",
            "usage": {
              "prompt_tokens": 1465,
              "completion_tokens": 139,
              "total_tokens": 1604
            }
          },
          "evaluatorAgent": {
            "response": "VALID: Ticket price matches lowPriceForRegularTickets.",
            "usage": {
              "prompt_tokens": 861,
              "completion_tokens": 11,
              "total_tokens": 872
            }
          }
        },
        {
          "primaryAgent": {
            "title": "Harry Potter and the Cursed Child",
            "body": "Broadway's magical hit returns with a fresh new version. Catch it now starting at $63.",
            "inAppMessage": "Catch the new version of Harry Potter on Broadway from $63",
            "usage": {
              "prompt_tokens": 1465,
              "completion_tokens": 136,
              "total_tokens": 1601
            }
          },
          "evaluatorAgent": {
            "response": "VALID: Price matches lowPriceForRegularTickets, no % symbol shown.",
            "usage": {
              "prompt_tokens": 863,
              "completion_tokens": 15,
              "total_tokens": 878
            }
          }
        }
      ],
      "hallucination_summary": {
        "status": "PASS",
        "hallucinations_detected": 0,
        "total_iterations": 3
      }
    },
    {
      "testName": "test a case where low price has not changed but max discount percentage has",
      "testDescription": "The show \"& Juliet\" has a low price for regular tickets set at $63. The maximum discount amount has increased by $22, bringing it to a new total of $85. Additionally, the maximum discount percentage has increased by 10%, now reaching 66%.",
      "iterations": [
        {
          "primaryAgent": {
            "title": "& Juliet",
            "body": "Now enjoy tickets from $63 for an unforgettable evening.",
            "inAppMessage": "& Juliet tickets from $63",
            "usage": {
              "prompt_tokens": 957,
              "completion_tokens": 101,
              "total_tokens": 1058
            }
          },
          "evaluatorAgent": {
            "response": "VALID: Numbers match and no % symbol shown.",
            "usage": {
              "prompt_tokens": 340,
              "completion_tokens": 10,
              "total_tokens": 350
            }
          }
        },
        {
          "primaryAgent": {
            "title": "& Juliet",
            "body": "Snag tickets now starting at $63!",
            "inAppMessage": "& Juliet tickets from $63",
            "usage": {
              "prompt_tokens": 957,
              "completion_tokens": 95,
              "total_tokens": 1052
            }
          },
          "evaluatorAgent": {
            "response": "VALID: Matches lowPriceForRegularTickets, no % symbol shown.",
            "usage": {
              "prompt_tokens": 338,
              "completion_tokens": 14,
              "total_tokens": 352
            }
          }
        },
        {
          "primaryAgent": {
            "title": "& Juliet",
            "body": "Great savings alert! Secure tickets from $63 now.",
            "inAppMessage": "& Juliet savings Grab tix from $63 today",
            "usage": {
              "prompt_tokens": 957,
              "completion_tokens": 105,
              "total_tokens": 1062
            }
          },
          "evaluatorAgent": {
            "response": "VALID: All numbers match source data, no % symbol shown.",
            "usage": {
              "prompt_tokens": 340,
              "completion_tokens": 13,
              "total_tokens": 353
            }
          }
        }
      ],
      "hallucination_summary": {
        "status": "PASS",
        "hallucinations_detected": 0,
        "total_iterations": 3
      }
    },
    {
      "testName": "test a case where a show has breaking news about a cast change",
      "testDescription": "Adam Lambert and Auli'i Cravalho will join the Broadway cast of \"Cabaret\" starting September 16 at the August Wilson Theatre. Lambert, known for his role as the runner-up on American Idol and his collaboration with Queen, will play the Emcee. Cravalho, famous for voicing Moana and starring in the film adaptation of \"Mean Girls,\" will portray Sally Bowles. They replace Eddie Redmayne and Gayle Rankin, who originated these roles in the Tony Award-nominated revival, through September 14. Lambert and Cravalho will perform until March 30, 2025. The cast also features Bebe Neuwirth, Steven Skybell, Ato Blankson-Wood, Natascia Diaz, and Henry Gottfried. The musical, set in 1930s Berlin, is directed by Rebecca Frecknall and offers a semi-immersive experience at the Kit Kat Club. Regular ticket prices start at $63.",
      "iterations": [
        {
          "primaryAgent": {
            "title": "Cabaret",
            "body": "Adam Lambert and Auli'i Cravalho join Cabaret on Broadway Sept 16.",
            "inAppMessage": "Cabaret: Adam Lambert & Auli'i Cravalho join starting Sept 16!",
            "usage": {
              "prompt_tokens": 1595,
              "completion_tokens": 132,
              "total_tokens": 1727
            }
          },
          "evaluatorAgent": {
            "response": "VALID: Matches show data and article details.",
            "usage": {
              "prompt_tokens": 986,
              "completion_tokens": 9,
              "total_tokens": 995
            }
          }
        },
        {
          "primaryAgent": {
            "title": "Cabaret",
            "body": "Adam Lambert & Auli'i Cravalho join Broadway cast Sept 16!",
            "inAppMessage": "Cabaret: Adam Lambert & Auli'i Cravalho join the cast Sept 16",
            "usage": {
              "prompt_tokens": 1595,
              "completion_tokens": 140,
              "total_tokens": 1735
            }
          },
          "evaluatorAgent": {
            "response": "VALID: Matches article details; no % symbol shown.",
            "usage": {
              "prompt_tokens": 984,
              "completion_tokens": 11,
              "total_tokens": 995
            }
          }
        },
        {
          "primaryAgent": {
            "title": "Cabaret",
            "body": "Adam Lambert and Auli'i Cravalho join Cabaret live from $63.",
            "inAppMessage": "Cabaret: Adam Lambert and Auli'i Cravalho join the cast",
            "usage": {
              "prompt_tokens": 1595,
              "completion_tokens": 130,
              "total_tokens": 1725
            }
          },
          "evaluatorAgent": {
            "response": "VALID: Price matches lowPriceForRegularTickets.",
            "usage": {
              "prompt_tokens": 985,
              "completion_tokens": 10,
              "total_tokens": 995
            }
          }
        }
      ],
      "hallucination_summary": {
        "status": "PASS",
        "hallucinations_detected": 0,
        "total_iterations": 3
      }
    },
    {
      "testName": "test a last call show alert for a show closing soon",
      "testDescription": "The show \"Wicked\" is closing soon, on January 1, 2026, after starting on October 30, 2003, in the US. Regular ticket prices start at $50, and there is a possibility of showing a discount percentage.",
      "iterations": [
        {
          "primaryAgent": {
            "title": "Wicked",
            "body": "Don't miss out! Wicked is closing soon. Secure your tickets from $50.",
            "inAppMessage": "Wicked is closing soon. Tickets from $50.",
            "usage": {
              "prompt_tokens": 920,
              "completion_tokens": 117,
              "total_tokens": 1037
            }
          },
          "evaluatorAgent": {
            "response": "VALID: All numbers and claims match source data.",
            "usage": {
              "prompt_tokens": 309,
              "completion_tokens": 10,
              "total_tokens": 319
            }
          }
        },
        {
          "primaryAgent": {
            "title": "Wicked",
            "body": "See the magical journey before it ends on Jan 1. Tickets from $50.",
            "inAppMessage": "Wicked See it before it ends on Jan 1. Tix from $50.",
            "usage": {
              "prompt_tokens": 920,
              "completion_tokens": 122,
              "total_tokens": 1042
            }
          },
          "evaluatorAgent": {
            "response": "VALID: Numbers and details match source data.",
            "usage": {
              "prompt_tokens": 310,
              "completion_tokens": 9,
              "total_tokens": 319
            }
          }
        },
        {
          "primaryAgent": {
            "title": "Wicked",
            "body": "Don't miss your chance! Last weeks to experience Wicked from $50.",
            "inAppMessage": "Wicked is closing soon! Get your tickets now from $50.",
            "usage": {
              "prompt_tokens": 920,
              "completion_tokens": 115,
              "total_tokens": 1035
            }
          },
          "evaluatorAgent": {
            "response": "VALID: Price matches lowPriceForRegularTickets, % symbol not used.",
            "usage": {
              "prompt_tokens": 307,
              "completion_tokens": 15,
              "total_tokens": 322
            }
          }
        }
      ],
      "hallucination_summary": {
        "status": "PASS",
        "hallucinations_detected": 0,
        "total_iterations": 3
      }
    },
    {
      "testName": "test uk case where there is a promotion only",
      "testDescription": "changes: promotion added (pay no fees), nothing else changes",
      "iterations": [
        {
          "primaryAgent": {
            "title": "Musicals by Candlelight: Andrew Lloyd Webber",
            "body": "Enjoy \"Pay No Fees\" on tickets starting at £15. Book now!",
            "inAppMessage": "Musicals by Candlelight: Andrew Lloyd Webber Pay No Fees £15",
            "usage": {
              "prompt_tokens": 928,
              "completion_tokens": 134,
              "total_tokens": 1062
            }
          },
          "evaluatorAgent": {
            "response": "VALID: All numbers and details match source data.",
            "usage": {
              "prompt_tokens": 328,
              "completion_tokens": 10,
              "total_tokens": 338
            }
          }
        },
        {
          "primaryAgent": {
            "title": "Musicals by Candlelight: Andrew Lloyd Webber",
            "body": "Enjoy 'Pay No Fees' when you book your tickets from £15.",
            "inAppMessage": "Musicals by Candlelight: Enjoy 'Pay No Fees' from £15.",
            "usage": {
              "prompt_tokens": 928,
              "completion_tokens": 138,
              "total_tokens": 1066
            }
          },
          "evaluatorAgent": {
            "response": "VALID: All numbers and claims match the source data.",
            "usage": {
              "prompt_tokens": 327,
              "completion_tokens": 11,
              "total_tokens": 338
            }
          }
        },
        {
          "primaryAgent": {
            "title": "Musicals by Candlelight: Andrew Lloyd Webber",
            "body": "Experience the magic with Pay No Fees promotion. Tix from £15.",
            "inAppMessage": "Musicals by Candlelight: Enjoy pay no fees. Tix from £15.",
            "usage": {
              "prompt_tokens": 928,
              "completion_tokens": 132,
              "total_tokens": 1060
            }
          },
          "evaluatorAgent": {
            "response": "VALID: Matches lowPriceForRegularTickets and no % symbol shown.",
            "usage": {
              "prompt_tokens": 327,
              "completion_tokens": 14,
              "total_tokens": 341
            }
          }
        }
      ],
      "hallucination_summary": {
        "status": "PASS",
        "hallucinations_detected": 0,
        "total_iterations": 3
      }
    },
    {
      "testName": "test a case where max discount percent changed, nothing else",
      "testDescription": "The show \"& Juliet\" has regular tickets starting at $59. There is a new maximum discount percentage of 71%, which is an increase of 8%.",
      "iterations": [
        {
          "primaryAgent": {
            "title": "& Juliet",
            "body": "Get tickets to & Juliet from just $59 while they last.",
            "inAppMessage": "& Juliet tickets from $59 now available",
            "usage": {
              "prompt_tokens": 923,
              "completion_tokens": 107,
              "total_tokens": 1030
            }
          },
          "evaluatorAgent": {
            "response": "VALID: Price matches lowPriceForRegularTickets, % symbol not required.",
            "usage": {
              "prompt_tokens": 308,
              "completion_tokens": 15,
              "total_tokens": 323
            }
          }
        },
        {
          "primaryAgent": {
            "title": "& Juliet",
            "body": "Tickets now from $59. Don't miss out!",
            "inAppMessage": "& Juliet tickets now from $59.",
            "usage": {
              "prompt_tokens": 923,
              "completion_tokens": 97,
              "total_tokens": 1020
            }
          },
          "evaluatorAgent": {
            "response": "VALID: Numbers match, % symbol not required.",
            "usage": {
              "prompt_tokens": 305,
              "completion_tokens": 10,
              "total_tokens": 315
            }
          }
        },
        {
          "primaryAgent": {
            "title": "& Juliet",
            "body": "Get tix starting from $59 with significant savings!",
            "inAppMessage": "& Juliet tickets from $59 with major savings!",
            "usage": {
              "prompt_tokens": 923,
              "completion_tokens": 104,
              "total_tokens": 1027
            }
          },
          "evaluatorAgent": {
            "response": "HALLUCINATION: Missing 71% discount mention",
            "usage": {
              "prompt_tokens": 306,
              "completion_tokens": 11,
              "total_tokens": 317
            }
          }
        }
      ],
      "hallucination_summary": {
        "status": "FAIL",
        "hallucinations_detected": 1,
        "total_iterations": 3
      }
    },
    {
      "testName": "test a case where low price has changed slightly but there is a promotion",
      "testDescription": "The show \"The Hills of California\" has a new lowest ticket price of $50, which is a $3 decrease. There is a \"24 Hour\" promotion with a \"24-hour offer\" message. This promotion is targeted at Gold members.",
      "iterations": [
        {
          "primaryAgent": {
            "title": "The Hills of California",
            "body": "Gold Member tix now available from $50 for 24 hours only.",
            "inAppMessage": "The Hills of California Gold tix from $50 for 24 hours.",
            "usage": {
              "prompt_tokens": 928,
              "completion_tokens": 123,
              "total_tokens": 1051
            }
          },
          "evaluatorAgent": {
            "response": "VALID: All numbers and conditions match source data.",
            "usage": {
              "prompt_tokens": 318,
              "completion_tokens": 10,
              "total_tokens": 328
            }
          }
        },
        {
          "primaryAgent": {
            "title": "The Hills of California",
            "body": "Gold members: Get your tickets now at a new low price from $50!",
            "inAppMessage": "The Hills of California tix for gold now from $50!",
            "usage": {
              "prompt_tokens": 928,
              "completion_tokens": 125,
              "total_tokens": 1053
            }
          },
          "evaluatorAgent": {
            "response": "VALID: Numbers match and % symbol not required.",
            "usage": {
              "prompt_tokens": 319,
              "completion_tokens": 10,
              "total_tokens": 329
            }
          }
        },
        {
          "primaryAgent": {
            "title": "The Hills of California",
            "body": "Gold members, grab your tickets now for just $47 with our 24-hour offer!",
            "inAppMessage": "The Hills of California tix for $47 with 24 hour offer!",
            "usage": {
              "prompt_tokens": 928,
              "completion_tokens": 138,
              "total_tokens": 1066
            }
          },
          "evaluatorAgent": {
            "response": "VALID: Numbers match source data, % symbol not shown.",
            "usage": {
              "prompt_tokens": 321,
              "completion_tokens": 12,
              "total_tokens": 333
            }
          }
        }
      ],
      "hallucination_summary": {
        "status": "PASS",
        "hallucinations_detected": 0,
        "total_iterations": 3
      }
    },
    {
      "testName": "test uk case where there is a promotion only",
      "testDescription": "\"Moulin Rouge! The Musical\" has a promotion titled \"Great value seats\" with a message indicating that these seats are available at highlighted performances. The lowest price for regular tickets is £28, and there is an option to show a discount percentage.",
      "iterations": [
        {
          "primaryAgent": {
            "title": "Moulin Rouge! The Musical",
            "body": "Great value seats now available from £28. Don't miss out!",
            "inAppMessage": "Moulin Rouge! The Musical: Great value seats for £28.",
            "usage": {
              "prompt_tokens": 929,
              "completion_tokens": 128,
              "total_tokens": 1057
            }
          },
          "evaluatorAgent": {
            "response": "VALID: Numbers match source data; % symbol not shown.",
            "usage": {
              "prompt_tokens": 323,
              "completion_tokens": 12,
              "total_tokens": 335
            }
          }
        },
        {
          "primaryAgent": {
            "title": "Moulin Rouge! The Musical",
            "body": "Explore great value seats available at highlighted performances.",
            "inAppMessage": "Moulin Rouge! The Musical: Great value seats available now.",
            "usage": {
              "prompt_tokens": 929,
              "completion_tokens": 124,
              "total_tokens": 1053
            }
          },
          "evaluatorAgent": {
            "response": "VALID: Matches promotion message and no % symbol shown.",
            "usage": {
              "prompt_tokens": 316,
              "completion_tokens": 11,
              "total_tokens": 327
            }
          }
        },
        {
          "primaryAgent": {
            "title": "Moulin Rouge! The Musical",
            "body": "Great value seats available at highlighted performances from £28.",
            "inAppMessage": "Moulin Rouge! Great value seats now available from £28.",
            "usage": {
              "prompt_tokens": 929,
              "completion_tokens": 125,
              "total_tokens": 1054
            }
          },
          "evaluatorAgent": {
            "response": "VALID: Matches lowPriceForRegularTickets and canShowDiscountPercentage=true.",
            "usage": {
              "prompt_tokens": 321,
              "completion_tokens": 15,
              "total_tokens": 336
            }
          }
        }
      ],
      "hallucination_summary": {
        "status": "PASS",
        "hallucinations_detected": 0,
        "total_iterations": 3
      }
    },
    {
      "testName": "test a basic case, SIX with low price drop",
      "testDescription": "The show \"SIX\" has a new lowest price of $59 which is a $20 reduction. It also has a new max discount percent of 39% up from no max discount percent. The max discount percent has a promotion tied to it \"Exclusive discount for TodayTix only\".",
      "iterations": [
        {
          "primaryAgent": {
            "title": "SIX",
            "body": "Snag tickets now at a dazzling new low price of $59!",
            "inAppMessage": "SIX: Tickets now at a new low price of $59.",
            "usage": {
              "prompt_tokens": 968,
              "completion_tokens": 114,
              "total_tokens": 1082
            }
          },
          "evaluatorAgent": {
            "response": "VALID: All numbers match source data, % symbol not shown.",
            "usage": {
              "prompt_tokens": 355,
              "completion_tokens": 13,
              "total_tokens": 368
            }
          }
        },
        {
          "primaryAgent": {
            "title": "SIX",
            "body": "Get tickets now at a new low price of $59.",
            "inAppMessage": "SIX: Get tickets at a new low price of $59.",
            "usage": {
              "prompt_tokens": 968,
              "completion_tokens": 122,
              "total_tokens": 1090
            }
          },
          "evaluatorAgent": {
            "response": "VALID: Matches lowPriceForRegularTickets and canShowDiscountPercentage=true.",
            "usage": {
              "prompt_tokens": 353,
              "completion_tokens": 15,
              "total_tokens": 368
            }
          }
        },
        {
          "primaryAgent": {
            "title": "SIX",
            "body": "Get tickets now at a new low price of $59.",
            "inAppMessage": "SIX tickets now just $59!",
            "usage": {
              "prompt_tokens": 968,
              "completion_tokens": 108,
              "total_tokens": 1076
            }
          },
          "evaluatorAgent": {
            "response": "VALID: Price matches lowPriceForRegularTickets.",
            "usage": {
              "prompt_tokens": 353,
              "completion_tokens": 10,
              "total_tokens": 363
            }
          }
        }
      ],
      "hallucination_summary": {
        "status": "PASS",
        "hallucinations_detected": 0,
        "total_iterations": 3
      }
    },
    {
      "testName": "test a last call show alert for a show that has announced closure",
      "testDescription": "The show \"Wicked\" is announcing its closing on January 1, 2026, after starting on October 30, 2003, in the US. Regular ticket prices start at $50, and there is a possibility of showing a discount percentage.",
      "iterations": [
        {
          "primaryAgent": {
            "title": "Wicked",
            "body": "Catch Wicked before it closes on January 1st, 2026.",
            "inAppMessage": "Wicked closing on January 1, 2026. Don't miss it!",
            "usage": {
              "prompt_tokens": 921,
              "completion_tokens": 120,
              "total_tokens": 1041
            }
          },
          "evaluatorAgent": {
            "response": "VALID: Matches show name and closing date.",
            "usage": {
              "prompt_tokens": 309,
              "completion_tokens": 9,
              "total_tokens": 318
            }
          }
        },
        {
          "primaryAgent": {
            "title": "Wicked",
            "body": "Last chance to see Wicked before it closes on Jan 1, 2026. Get your tickets from $50.",
            "inAppMessage": "Wicked is closing Jan 1, 2026. Tix from $50.",
            "usage": {
              "prompt_tokens": 921,
              "completion_tokens": 124,
              "total_tokens": 1045
            }
          },
          "evaluatorAgent": {
            "response": "VALID: All numbers and details match source data.",
            "usage": {
              "prompt_tokens": 318,
              "completion_tokens": 10,
              "total_tokens": 328
            }
          }
        },
        {
          "primaryAgent": {
            "title": "Wicked",
            "body": "Catch Wicked before it closes January 1, 2026. Tickets from $50.",
            "inAppMessage": "Wicked's final curtain call January 1, 2026.",
            "usage": {
              "prompt_tokens": 921,
              "completion_tokens": 127,
              "total_tokens": 1048
            }
          },
          "evaluatorAgent": {
            "response": "VALID: Matches lowPriceForRegularTickets and includes closing date.",
            "usage": {
              "prompt_tokens": 312,
              "completion_tokens": 13,
              "total_tokens": 325
            }
          }
        }
      ],
      "hallucination_summary": {
        "status": "PASS",
        "hallucinations_detected": 0,
        "total_iterations": 3
      }
    },
    {
      "testName": "test a case where max discount percentage is the same as the diff",
      "testDescription": "changes: lowestPrice 15, diff of 8 and no promotion, maxDiscountPercentage 39% diff is 39",
      "iterations": [
        {
          "primaryAgent": {
            "title": "The Play That Goes Wrong",
            "body": "New low price on tickets! Snag yours now from £15.",
            "inAppMessage": "The Play That Goes Wrong: Tickets £15",
            "usage": {
              "prompt_tokens": 975,
              "completion_tokens": 123,
              "total_tokens": 1098
            }
          },
          "evaluatorAgent": {
            "response": "VALID: All numbers match source data, and % symbol usage is correct.",
            "usage": {
              "prompt_tokens": 368,
              "completion_tokens": 15,
              "total_tokens": 383
            }
          }
        },
        {
          "primaryAgent": {
            "title": "The Play That Goes Wrong",
            "body": "Tickets now available from £15. Book your spot today!",
            "inAppMessage": "The Play That Goes Wrong tickets from £15 now!",
            "usage": {
              "prompt_tokens": 975,
              "completion_tokens": 125,
              "total_tokens": 1100
            }
          },
          "evaluatorAgent": {
            "response": "VALID: All numbers match source data, % symbol not needed.",
            "usage": {
              "prompt_tokens": 366,
              "completion_tokens": 13,
              "total_tokens": 379
            }
          }
        },
        {
          "primaryAgent": {
            "title": "The Play That Goes Wrong",
            "body": "Get tickets now at a new low price of £15.",
            "inAppMessage": "The Play That Goes Wrong tickets now at just £15.",
            "usage": {
              "prompt_tokens": 975,
              "completion_tokens": 120,
              "total_tokens": 1095
            }
          },
          "evaluatorAgent": {
            "response": "VALID: Matches newLowestPrice and canShowDiscountPercentage=true",
            "usage": {
              "prompt_tokens": 366,
              "completion_tokens": 12,
              "total_tokens": 378
            }
          }
        }
      ],
      "hallucination_summary": {
        "status": "PASS",
        "hallucinations_detected": 0,
        "total_iterations": 3
      }
    },
    {
      "testName": "test uk case where there is a promotion and a price change",
      "testDescription": "The show \"The Lehman Trilogy\" now has a new lowest price for regular tickets at £23, which is a £5 reduction. There is an exclusive pricing promotion with highlighted dates offering TodayTix exclusive prices.",
      "iterations": [
        {
          "primaryAgent": {
            "title": "The Lehman Trilogy",
            "body": "Don't miss exclusive prices. Tickets now from £23!",
            "inAppMessage": "The Lehman Trilogy tickets now from £23 with exclusive pricing!",
            "usage": {
              "prompt_tokens": 977,
              "completion_tokens": 121,
              "total_tokens": 1098
            }
          },
          "evaluatorAgent": {
            "response": "VALID: Prices match source data, and % symbol not shown.",
            "usage": {
              "prompt_tokens": 366,
              "completion_tokens": 13,
              "total_tokens": 379
            }
          }
        },
        {
          "primaryAgent": {
            "title": "The Lehman Trilogy",
            "body": "Tickets now from £23! Don't miss exclusive pricing on select dates.",
            "inAppMessage": "The Lehman Trilogy tickets from £23 with exclusive pricing.",
            "usage": {
              "prompt_tokens": 977,
              "completion_tokens": 117,
              "total_tokens": 1094
            }
          },
          "evaluatorAgent": {
            "response": "VALID: Numbers and message match source data.",
            "usage": {
              "prompt_tokens": 369,
              "completion_tokens": 9,
              "total_tokens": 378
            }
          }
        },
        {
          "primaryAgent": {
            "title": "The Lehman Trilogy",
            "body": "Experience The Lehman Trilogy with tickets from £23. Exclusive pricing available!",
            "inAppMessage": "The Lehman Trilogy: Tix from £23. Exclusive pricing!",
            "usage": {
              "prompt_tokens": 977,
              "completion_tokens": 121,
              "total_tokens": 1098
            }
          },
          "evaluatorAgent": {
            "response": "VALID: Matches low price and mentions exclusive pricing.",
            "usage": {
              "prompt_tokens": 370,
              "completion_tokens": 10,
              "total_tokens": 380
            }
          }
        }
      ],
      "hallucination_summary": {
        "status": "PASS",
        "hallucinations_detected": 0,
        "total_iterations": 3
      }
    },
    {
      "testName": "test uk case where there is a promotion only, mousetrap",
      "testDescription": "The show \"The Mousetrap\" has regular ticket prices starting at £28. A promotion titled \"Tix Selling Fast\" has been added, indicating that tickets are selling quickly, with the lowest price point for this promotion being £35.",
      "iterations": [
        {
          "primaryAgent": {
            "title": "The Mousetrap",
            "body": "New promotion live! Get tickets from £28.",
            "inAppMessage": "The Mousetrap: New promotion live! Tix from £28.",
            "usage": {
              "prompt_tokens": 924,
              "completion_tokens": 118,
              "total_tokens": 1042
            }
          },
          "evaluatorAgent": {
            "response": "HALLUCINATION: Lowest price point is £35, not £28.",
            "usage": {
              "prompt_tokens": 312,
              "completion_tokens": 16,
              "total_tokens": 328
            }
          }
        },
        {
          "primaryAgent": {
            "title": "The Mousetrap",
            "body": "Tix selling fast! Grab your entry tickets from £28.",
            "inAppMessage": "The Mousetrap: tix from £28 selling fast!",
            "usage": {
              "prompt_tokens": 924,
              "completion_tokens": 114,
              "total_tokens": 1038
            }
          },
          "evaluatorAgent": {
            "response": "HALLUCINATION: Push mentions £28, JSON shows lowest price as £35.",
            "usage": {
              "prompt_tokens": 315,
              "completion_tokens": 18,
              "total_tokens": 333
            }
          }
        },
        {
          "primaryAgent": {
            "title": "The Mousetrap",
            "body": "Discover timeless suspense from £28. Hurry, tix selling fast!",
            "inAppMessage": "The Mousetrap: Tix selling fast from £28",
            "usage": {
              "prompt_tokens": 924,
              "completion_tokens": 117,
              "total_tokens": 1041
            }
          },
          "evaluatorAgent": {
            "response": "HALLUCINATION: Mentions £28, but lowest price point is £35.",
            "usage": {
              "prompt_tokens": 316,
              "completion_tokens": 18,
              "total_tokens": 334
            }
          }
        }
      ],
      "hallucination_summary": {
        "status": "FAIL",
        "hallucinations_detected": 3,
        "total_iterations": 3
      }
    },
    {
      "testName": "test uk case where there is a promotion and a discount % change",
      "testDescription": "The show \"Why Am I So Single?\" offers regular tickets starting at £25. A new promotion has been introduced, allowing a maximum discount of 40%, which is an increase of 7% from the previous maximum discount. Additionally, there is a special offer with the lowest price point set at £30. These promotions are targeted at Gold Members.",
      "iterations": [
        {
          "primaryAgent": {
            "title": "Why Am I So Single?",
            "body": "Gold Members: Get tickets from £25! Special offer inside.",
            "inAppMessage": "Why Am I So Single? Gold Member tix from £25. Special offer!",
            "usage": {
              "prompt_tokens": 963,
              "completion_tokens": 128,
              "total_tokens": 1091
            }
          },
          "evaluatorAgent": {
            "response": "VALID: Matches lowPriceForRegularTickets £25, % symbol not shown",
            "usage": {
              "prompt_tokens": 355,
              "completion_tokens": 15,
              "total_tokens": 370
            }
          }
        },
        {
          "primaryAgent": {
            "title": "Why Am I So Single?",
            "body": "Gold Members exclusive! Special offer on tickets from £25.",
            "inAppMessage": "Why Am I So Single? Gold exclusive tickets from £25.",
            "usage": {
              "prompt_tokens": 963,
              "completion_tokens": 122,
              "total_tokens": 1085
            }
          },
          "evaluatorAgent": {
            "response": "HALLUCINATION: No mention of 40% discount in notification.",
            "usage": {
              "prompt_tokens": 354,
              "completion_tokens": 15,
              "total_tokens": 369
            }
          }
        },
        {
          "primaryAgent": {
            "title": "Why Am I So Single?",
            "body": "Gold Members, special offer on tix starting at £25!",
            "inAppMessage": "Why Am I So Single? Get Gold Member tix at £25!",
            "usage": {
              "prompt_tokens": 963,
              "completion_tokens": 119,
              "total_tokens": 1082
            }
          },
          "evaluatorAgent": {
            "response": "HALLUCINATION: Price should be £30, not £25.",
            "usage": {
              "prompt_tokens": 355,
              "completion_tokens": 15,
              "total_tokens": 370
            }
          }
        }
      ],
      "hallucination_summary": {
        "status": "FAIL",
        "hallucinations_detected": 2,
        "total_iterations": 3
      }
    },
    {
      "testName": "test a basic case of promotion only",
      "testDescription": "The show \"Six\" has regular ticket prices starting at $59. A promotion titled \"Hot deal\" has been added, highlighting dates with special offers. The promotion includes a lowest price point of $59, a maximum discount amount of $22, and a maximum discount percentage of 45%.",
      "iterations": [
        {
          "primaryAgent": {
            "title": "Six",
            "body": "Discover our Hot deal on Six! Grab your tickets starting at $59.",
            "inAppMessage": "Six: Discover our Hot deal! Tickets start at $59.",
            "usage": {
              "prompt_tokens": 997,
              "completion_tokens": 110,
              "total_tokens": 1107
            }
          },
          "evaluatorAgent": {
            "response": "VALID: All numbers match source data, % symbol not shown.",
            "usage": {
              "prompt_tokens": 384,
              "completion_tokens": 13,
              "total_tokens": 397
            }
          }
        },
        {
          "primaryAgent": {
            "title": "Six",
            "body": "Catch 'Six' with our Hot deal on highlighted dates. Tix from $59.",
            "inAppMessage": "Six: Enjoy our Hot deal with tickets from $59.",
            "usage": {
              "prompt_tokens": 997,
              "completion_tokens": 104,
              "total_tokens": 1101
            }
          },
          "evaluatorAgent": {
            "response": "VALID: Numbers match and % not shown when canShowDiscountPercentage=true.",
            "usage": {
              "prompt_tokens": 387,
              "completion_tokens": 15,
              "total_tokens": 402
            }
          }
        },
        {
          "primaryAgent": {
            "title": "Six",
            "body": "Catch the Hot deal now! Prices from $59.",
            "inAppMessage": "Six Catch the Hot deal now from $59!",
            "usage": {
              "prompt_tokens": 997,
              "completion_tokens": 109,
              "total_tokens": 1106
            }
          },
          "evaluatorAgent": {
            "response": "VALID: Numbers match and % symbol not shown.",
            "usage": {
              "prompt_tokens": 380,
              "completion_tokens": 10,
              "total_tokens": 390
            }
          }
        }
      ],
      "hallucination_summary": {
        "status": "PASS",
        "hallucinations_detected": 0,
        "total_iterations": 3
      }
    }
  ]};

        // Load and display the data
        document.addEventListener('DOMContentLoaded', () => {
            displayResults(testData.results);
        });
    </script>
</body>
</html>