<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Results</title>
    <style>
        body {
            font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            line-height: 1.5;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f5f5;
        }
        
        .test-case {
            background: white;
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        .test-description {
            color: #444;
            margin-bottom: 15px;
            font-size: 0.95em;
        }

        .results-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
            padding: 10px;
        }

        .result-card {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 6px;
            border: 1px solid #dee2e6;
        }

        .result-title {
            font-weight: 500;
            color: #495057;
            margin-bottom: 8px;
        }

        .result-content {
            color: #666;
            font-size: 0.9em;
        }
    </style>
</head>
<body>
    <div id="results"></div>

    <script>
        function displayResults(results) {
            const resultsContainer = document.getElementById('results');
            
            results.forEach(test => {
                const testElement = document.createElement('div');
                testElement.className = 'test-case';
                
                testElement.innerHTML = `
                    <div class="test-description">${test.testDescription}</div>
                    <div class="results-grid">
                        ${test.iterations.map(iteration => `
                            <div class="result-card">
                                <div class="result-title">Result</div>
                                <div class="result-content">
                                    <p><strong>Title:</strong> ${iteration.primaryAgent.title}</p>
                                    <p><strong>Body:</strong> ${iteration.primaryAgent.body}</p>
                                    <p><strong>In-App:</strong> ${iteration.primaryAgent.inAppMessage}</p>
                                </div>
                            </div>
                        `).join('')}
                    </div>
                `;
                
                resultsContainer.appendChild(testElement);
            });
        }

        // Test data
        const testData = {
            "results":[
    {
      "testName": "test a case where low price has not changed but max discount percentage has",
      "testDescription": "The push notification is regarding the show \"Back to the Future,\" where regular tickets are priced as low as $63. A new maximum discount percentage of 29% has been introduced.",
      "iterations": [
        {
          "primaryAgent": {
            "title": "Back to the Future",
            "body": "Get tickets now at a new low price of $63.",
            "inAppMessage": "Back to the Future tickets from $63",
            "usage": {
              "prompt_tokens": 934,
              "completion_tokens": 113,
              "total_tokens": 1047
            }
          },
          "evaluatorAgent": {
            "response": "VALID: Matches lowPriceForRegularTickets and % symbol is allowed.",
            "usage": {
              "prompt_tokens": 309,
              "completion_tokens": 14,
              "total_tokens": 323
            }
          }
        },
        {
          "primaryAgent": {
            "title": "Back to the Future",
            "body": "Experience the future now with tix from just $63.",
            "inAppMessage": "Back to the Future tix from $63.",
            "usage": {
              "prompt_tokens": 934,
              "completion_tokens": 112,
              "total_tokens": 1046
            }
          },
          "evaluatorAgent": {
            "response": "VALID: Numbers match and % not shown when canShowDiscountPercentage=true.",
            "usage": {
              "prompt_tokens": 309,
              "completion_tokens": 15,
              "total_tokens": 324
            }
          }
        },
        {
          "primaryAgent": {
            "title": "Back to the Future",
            "body": "New tix starting from $63. Grab yours while they last!",
            "inAppMessage": "Back to the Future: New tix from $63!",
            "usage": {
              "prompt_tokens": 934,
              "completion_tokens": 122,
              "total_tokens": 1056
            }
          },
          "evaluatorAgent": {
            "response": "VALID: All numbers match source data, % symbol not required.",
            "usage": {
              "prompt_tokens": 311,
              "completion_tokens": 13,
              "total_tokens": 324
            }
          }
        }
      ],
      "hallucination_summary": {
        "status": "PASS",
        "hallucinations_detected": 0,
        "total_iterations": 3
      }
    },
    {
      "testName": "test NYC case where there is a promotion, max discount amount and low price",
      "testDescription": "The show \"MJ The Musical\" has a promotion titled \"Cyber Sale\" offering limited-time savings. The new lowest price for regular tickets is $89, with a $5 decrease from the previous price. The maximum discount amount available is $25, which is a $7 increase from before. The promotion includes a maximum discount percentage of 30%.",
      "iterations": [
        {
          "primaryAgent": {
            "title": "MJ The Musical",
            "body": "Cyber Sale: exclusive offer on tickets starting from $89.",
            "inAppMessage": "MJ The Musical deals from $89 with Cyber Sale.",
            "usage": {
              "prompt_tokens": 1096,
              "completion_tokens": 121,
              "total_tokens": 1217
            }
          },
          "evaluatorAgent": {
            "response": "VALID: Numbers match and % symbol is allowed",
            "usage": {
              "prompt_tokens": 470,
              "completion_tokens": 9,
              "total_tokens": 479
            }
          }
        },
        {
          "primaryAgent": {
            "title": "MJ The Musical",
            "body": "Cyber Sale: Limited time savings available now. Get your tix from $89.",
            "inAppMessage": "MJ The Musical: Cyber Sale savings now on. Tix from $89.",
            "usage": {
              "prompt_tokens": 1096,
              "completion_tokens": 132,
              "total_tokens": 1228
            }
          },
          "evaluatorAgent": {
            "response": "VALID: All numbers match source data; % symbol shown as allowed.",
            "usage": {
              "prompt_tokens": 475,
              "completion_tokens": 14,
              "total_tokens": 489
            }
          }
        },
        {
          "primaryAgent": {
            "title": "MJ The Musical",
            "body": "Experience MJ The Musical with Cyber Sale pricing starting at $89.",
            "inAppMessage": "MJ The Musical now from $89 with Cyber Sale offer",
            "usage": {
              "prompt_tokens": 1096,
              "completion_tokens": 119,
              "total_tokens": 1215
            }
          },
          "evaluatorAgent": {
            "response": "VALID: Price matches lowPriceForRegularTickets.",
            "usage": {
              "prompt_tokens": 471,
              "completion_tokens": 10,
              "total_tokens": 481
            }
          }
        }
      ],
      "hallucination_summary": {
        "status": "PASS",
        "hallucinations_detected": 0,
        "total_iterations": 3
      }
    },
    {
      "testName": "test a case where a show has breaking news",
      "testDescription": "\"Harry Potter and the Cursed Child\" will debut a new version on Broadway at the Lyric Theatre starting November 12. The play, which originally opened in New York in 2018 as a two-part, five-hour production, was revised in 2021 to a one-part, 3.5-hour show. The upcoming 2024 version will run under three hours, including one intermission. The new cast includes Matthew James Thomas as Harry Potter, Sarah Killough as Ginny Potter, and Alex Serino as Albus Potter, among others. The story, written by Jack Thorne and based on an original story by Thorne, J.K. Rowling, and John Tiffany, follows Albus Potter and Scorpius Malfoy on a time-traveling adventure. Regular ticket prices start at $63.",
      "iterations": [
        {
          "primaryAgent": {
            "title": "Harry Potter and the Cursed Child",
            "body": "Exciting new version coming soon! See it under 3 hours from $63.",
            "inAppMessage": "Harry Potter with updates see it under 3 hours, tickets from $63.",
            "usage": {
              "prompt_tokens": 1477,
              "completion_tokens": 133,
              "total_tokens": 1610
            }
          },
          "evaluatorAgent": {
            "response": "VALID: Matches lowPriceForRegularTickets and no % symbol shown.",
            "usage": {
              "prompt_tokens": 860,
              "completion_tokens": 14,
              "total_tokens": 874
            }
          }
        },
        {
          "primaryAgent": {
            "title": "Harry Potter and the Cursed Child",
            "body": "Exciting changes coming! New version debuts on Broadway Nov 12.",
            "inAppMessage": "Harry Potter new version Nov 12!",
            "usage": {
              "prompt_tokens": 1477,
              "completion_tokens": 127,
              "total_tokens": 1604
            }
          },
          "evaluatorAgent": {
            "response": "VALID: No numbers or % symbols to verify. Matches provided data.",
            "usage": {
              "prompt_tokens": 858,
              "completion_tokens": 14,
              "total_tokens": 872
            }
          }
        },
        {
          "primaryAgent": {
            "title": "Harry Potter and the Cursed Child",
            "body": "Experience the new, shorter version from November 12 at the Lyric Theatre!",
            "inAppMessage": "Harry Potter and the Cursed Child: new version arriving Nov 12",
            "usage": {
              "prompt_tokens": 1477,
              "completion_tokens": 136,
              "total_tokens": 1613
            }
          },
          "evaluatorAgent": {
            "response": "VALID: No % symbol shown; matches data.",
            "usage": {
              "prompt_tokens": 859,
              "completion_tokens": 10,
              "total_tokens": 869
            }
          }
        }
      ],
      "hallucination_summary": {
        "status": "PASS",
        "hallucinations_detected": 0,
        "total_iterations": 3
      }
    },
    {
      "testName": "test a case where low price has not changed but max discount percentage has",
      "testDescription": "The show \"& Juliet\" has a low price for regular tickets set at $63. The maximum discount amount has increased by $22, bringing it to a new total of $85. Additionally, the maximum discount percentage has increased by 10%, now reaching 66%.",
      "iterations": [
        {
          "primaryAgent": {
            "title": "& Juliet",
            "body": "Experience & Juliet with ticket prices now starting at $63.",
            "inAppMessage": "& Juliet tix from $63",
            "usage": {
              "prompt_tokens": 969,
              "completion_tokens": 110,
              "total_tokens": 1079
            }
          },
          "evaluatorAgent": {
            "response": "VALID: Prices match source data, no % shown.",
            "usage": {
              "prompt_tokens": 341,
              "completion_tokens": 11,
              "total_tokens": 352
            }
          }
        },
        {
          "primaryAgent": {
            "title": "& Juliet",
            "body": "New discount! Tickets from just $63. Snag them before they're gone.",
            "inAppMessage": "& Juliet tix now from $63",
            "usage": {
              "prompt_tokens": 969,
              "completion_tokens": 108,
              "total_tokens": 1077
            }
          },
          "evaluatorAgent": {
            "response": "VALID: Numbers match; no % symbol shown.",
            "usage": {
              "prompt_tokens": 345,
              "completion_tokens": 10,
              "total_tokens": 355
            }
          }
        },
        {
          "primaryAgent": {
            "title": "& Juliet",
            "body": "Catch incredible savings on tickets from just $63!",
            "inAppMessage": "& Juliet: Savings on tix from $63!",
            "usage": {
              "prompt_tokens": 969,
              "completion_tokens": 116,
              "total_tokens": 1085
            }
          },
          "evaluatorAgent": {
            "response": "VALID: Matches lowPriceForRegularTickets and no % symbol shown.",
            "usage": {
              "prompt_tokens": 339,
              "completion_tokens": 14,
              "total_tokens": 353
            }
          }
        }
      ],
      "hallucination_summary": {
        "status": "PASS",
        "hallucinations_detected": 0,
        "total_iterations": 3
      }
    },
    {
      "testName": "test a case where a show has breaking news about a cast change",
      "testDescription": "Adam Lambert and Auli'i Cravalho will join the Broadway cast of \"Cabaret\" starting September 16 at the August Wilson Theatre. Lambert, known for his role as the runner-up on American Idol and his collaboration with Queen, will play the Emcee. Cravalho, famous for voicing Moana and starring in the film adaptation of \"Mean Girls,\" will portray Sally Bowles. They replace Eddie Redmayne and Gayle Rankin, who originated these roles in the Tony Award-nominated revival, through September 14. Lambert and Cravalho will perform until March 30, 2025. The cast also features Bebe Neuwirth, Steven Skybell, Ato Blankson-Wood, Natascia Diaz, and Henry Gottfried. The musical, set in 1930s Berlin, is directed by Rebecca Frecknall and offers a semi-immersive experience at the Kit Kat Club. Regular ticket prices start at $63.",
      "iterations": [
        {
          "primaryAgent": {
            "title": "Cabaret",
            "body": "Adam Lambert & Auli'i Cravalho join the cast starting September 16!",
            "inAppMessage": "Cabaret: Adam Lambert & Auli'i Cravalho join the cast!",
            "usage": {
              "prompt_tokens": 1607,
              "completion_tokens": 133,
              "total_tokens": 1740
            }
          },
          "evaluatorAgent": {
            "response": "VALID: Matches JSON data; no % symbol shown.",
            "usage": {
              "prompt_tokens": 985,
              "completion_tokens": 11,
              "total_tokens": 996
            }
          }
        },
        {
          "primaryAgent": {
            "title": "Cabaret",
            "body": "Adam Lambert & Auli'i Cravalho join cast from Sep 16. Get tickets from $63.",
            "inAppMessage": "Cabaret: Adam Lambert & Auli'i Cravalho join. Tix from $63.",
            "usage": {
              "prompt_tokens": 1607,
              "completion_tokens": 152,
              "total_tokens": 1759
            }
          },
          "evaluatorAgent": {
            "response": "VALID: All numbers and details match source data.",
            "usage": {
              "prompt_tokens": 990,
              "completion_tokens": 10,
              "total_tokens": 1000
            }
          }
        },
        {
          "primaryAgent": {
            "title": "Cabaret",
            "body": "Catch Adam Lambert and Auli'i Cravalho on Broadway. Tickets from $63.",
            "inAppMessage": "Cabaret: Adam Lambert and Auli'i Cravalho join the cast.",
            "usage": {
              "prompt_tokens": 1607,
              "completion_tokens": 130,
              "total_tokens": 1737
            }
          },
          "evaluatorAgent": {
            "response": "VALID: Ticket price matches lowPriceForRegularTickets.",
            "usage": {
              "prompt_tokens": 986,
              "completion_tokens": 11,
              "total_tokens": 997
            }
          }
        }
      ],
      "hallucination_summary": {
        "status": "PASS",
        "hallucinations_detected": 0,
        "total_iterations": 3
      }
    },
    {
      "testName": "test a last call show alert for a show closing soon",
      "testDescription": "The show \"Wicked\" is closing soon, on January 1, 2026, after starting on October 30, 2003, in the US. Regular ticket prices start at $50, and there is a possibility of showing a discount percentage.",
      "iterations": [
        {
          "primaryAgent": {
            "title": "Wicked",
            "body": "Secure your seats for Wicked as it closes on Jan 1. Tix from $50.",
            "inAppMessage": "Wicked: Closing soon, tix from $50.",
            "usage": {
              "prompt_tokens": 932,
              "completion_tokens": 120,
              "total_tokens": 1052
            }
          },
          "evaluatorAgent": {
            "response": "VALID: All numbers match source data, % symbol not mentioned.",
            "usage": {
              "prompt_tokens": 312,
              "completion_tokens": 13,
              "total_tokens": 325
            }
          }
        },
        {
          "primaryAgent": {
            "title": "Wicked",
            "body": "Don't miss Wicked before it closes on January 1st. Tickets from $50.",
            "inAppMessage": "Wicked closing soon get tix from $50",
            "usage": {
              "prompt_tokens": 932,
              "completion_tokens": 122,
              "total_tokens": 1054
            }
          },
          "evaluatorAgent": {
            "response": "VALID: All numbers and details match source data.",
            "usage": {
              "prompt_tokens": 310,
              "completion_tokens": 10,
              "total_tokens": 320
            }
          }
        },
        {
          "primaryAgent": {
            "title": "Wicked",
            "body": "Get your tickets now before it closes, starting at $50.",
            "inAppMessage": "Wicked: Tix before closing, from $50.",
            "usage": {
              "prompt_tokens": 932,
              "completion_tokens": 112,
              "total_tokens": 1044
            }
          },
          "evaluatorAgent": {
            "response": "VALID: Matches lowPriceForRegularTickets and no % symbol shown.",
            "usage": {
              "prompt_tokens": 306,
              "completion_tokens": 14,
              "total_tokens": 320
            }
          }
        }
      ],
      "hallucination_summary": {
        "status": "PASS",
        "hallucinations_detected": 0,
        "total_iterations": 3
      }
    },
    {
      "testName": "test uk case where there is a promotion only",
      "testDescription": "changes: promotion added (pay no fees), nothing else changes",
      "iterations": [
        {
          "primaryAgent": {
            "title": "Musicals by Candlelight: Andrew Lloyd Webber",
            "body": "Pay no fees on tickets starting at £15. Offer available now.",
            "inAppMessage": "Musicals by Candlelight: £15 tix no fees.",
            "usage": {
              "prompt_tokens": 940,
              "completion_tokens": 130,
              "total_tokens": 1070
            }
          },
          "evaluatorAgent": {
            "response": "VALID: Numbers match and no % symbol shown.",
            "usage": {
              "prompt_tokens": 326,
              "completion_tokens": 10,
              "total_tokens": 336
            }
          }
        },
        {
          "primaryAgent": {
            "title": "Musicals by Candlelight: Andrew Lloyd Webber",
            "body": "Pay no fees on tickets from £15. Don't miss out!",
            "inAppMessage": "Pay no fees from £15",
            "usage": {
              "prompt_tokens": 940,
              "completion_tokens": 123,
              "total_tokens": 1063
            }
          },
          "evaluatorAgent": {
            "response": "VALID: All numbers and details match source data.",
            "usage": {
              "prompt_tokens": 325,
              "completion_tokens": 10,
              "total_tokens": 335
            }
          }
        },
        {
          "primaryAgent": {
            "title": "Musicals by Candlelight: Andrew Lloyd Webber",
            "body": "Pay no fees on your tickets from £15. Get yours today!",
            "inAppMessage": "Musicals by Candlelight: Pay no fees on tickets from £15",
            "usage": {
              "prompt_tokens": 940,
              "completion_tokens": 141,
              "total_tokens": 1081
            }
          },
          "evaluatorAgent": {
            "response": "VALID: All numbers and details match the source data.",
            "usage": {
              "prompt_tokens": 326,
              "completion_tokens": 11,
              "total_tokens": 337
            }
          }
        }
      ],
      "hallucination_summary": {
        "status": "PASS",
        "hallucinations_detected": 0,
        "total_iterations": 3
      }
    },
    {
      "testName": "test a case where max discount percent changed, nothing else",
      "testDescription": "The show \"& Juliet\" has regular tickets starting at $59. There is a new maximum discount percentage of 71%, which is an increase of 8%.",
      "iterations": [
        {
          "primaryAgent": {
            "title": "& Juliet",
            "body": "Get tix now from $59. Limited inventory available!",
            "inAppMessage": "& Juliet tickets from $59 available now",
            "usage": {
              "prompt_tokens": 935,
              "completion_tokens": 103,
              "total_tokens": 1038
            }
          },
          "evaluatorAgent": {
            "response": "VALID: All numbers match source data, % not mentioned.",
            "usage": {
              "prompt_tokens": 307,
              "completion_tokens": 12,
              "total_tokens": 319
            }
          }
        },
        {
          "primaryAgent": {
            "title": "& Juliet",
            "body": "Get tickets now for just $59 at the new low price.",
            "inAppMessage": "& Juliet: Tix now $59",
            "usage": {
              "prompt_tokens": 935,
              "completion_tokens": 105,
              "total_tokens": 1040
            }
          },
          "evaluatorAgent": {
            "response": "VALID: $59 matches lowPriceForRegularTickets, no % symbol needed.",
            "usage": {
              "prompt_tokens": 308,
              "completion_tokens": 16,
              "total_tokens": 324
            }
          }
        },
        {
          "primaryAgent": {
            "title": "& Juliet",
            "body": "Get tix now at a new low price from $59.",
            "inAppMessage": "& Juliet tickets from $59.",
            "usage": {
              "prompt_tokens": 935,
              "completion_tokens": 110,
              "total_tokens": 1045
            }
          },
          "evaluatorAgent": {
            "response": "VALID: All numbers and details match source data.",
            "usage": {
              "prompt_tokens": 308,
              "completion_tokens": 10,
              "total_tokens": 318
            }
          }
        }
      ],
      "hallucination_summary": {
        "status": "PASS",
        "hallucinations_detected": 0,
        "total_iterations": 3
      }
    },
    {
      "testName": "test a case where low price has changed slightly but there is a promotion",
      "testDescription": "The show \"The Hills of California\" has a new lowest ticket price of $50, which is a $3 decrease. There is a \"24 Hour\" promotion with a \"24-hour offer\" message. This promotion is targeted at Gold members.",
      "iterations": [
        {
          "primaryAgent": {
            "title": "The Hills of California",
            "body": "Gold members get tix now from $50 for 24 hours only.",
            "inAppMessage": "The Hills of California tix from $50 for 24h!",
            "usage": {
              "prompt_tokens": 940,
              "completion_tokens": 125,
              "total_tokens": 1065
            }
          },
          "evaluatorAgent": {
            "response": "VALID: Numbers match and no % symbol shown.",
            "usage": {
              "prompt_tokens": 318,
              "completion_tokens": 10,
              "total_tokens": 328
            }
          }
        },
        {
          "primaryAgent": {
            "title": "The Hills of California",
            "body": "Gold Members: Enjoy tickets from $50 with our 24-hour offer.",
            "inAppMessage": "The Hills of California: Gold Members, tickets from $50!",
            "usage": {
              "prompt_tokens": 940,
              "completion_tokens": 124,
              "total_tokens": 1064
            }
          },
          "evaluatorAgent": {
            "response": "VALID: All numbers and details match source data.",
            "usage": {
              "prompt_tokens": 318,
              "completion_tokens": 10,
              "total_tokens": 328
            }
          }
        },
        {
          "primaryAgent": {
            "title": "The Hills of California",
            "body": "Gold members: 24-hour offer on tix now available from $50!",
            "inAppMessage": "The Hills of California: tix from $50 for gold members!",
            "usage": {
              "prompt_tokens": 940,
              "completion_tokens": 127,
              "total_tokens": 1067
            }
          },
          "evaluatorAgent": {
            "response": "VALID: Numbers and details match source data.",
            "usage": {
              "prompt_tokens": 319,
              "completion_tokens": 9,
              "total_tokens": 328
            }
          }
        }
      ],
      "hallucination_summary": {
        "status": "PASS",
        "hallucinations_detected": 0,
        "total_iterations": 3
      }
    },
    {
      "testName": "test uk case where there is a promotion only",
      "testDescription": "\"Moulin Rouge! The Musical\" has a promotion titled \"Great value seats\" with a message indicating that these seats are available at highlighted performances. The lowest price for regular tickets is £28, and there is an option to show a discount percentage.",
      "iterations": [
        {
          "primaryAgent": {
            "title": "Moulin Rouge! The Musical",
            "body": "Great value seats now available from £28 at select performances.",
            "inAppMessage": "Moulin Rouge! seats from £28.",
            "usage": {
              "prompt_tokens": 941,
              "completion_tokens": 119,
              "total_tokens": 1060
            }
          },
          "evaluatorAgent": {
            "response": "VALID: Numbers and details match source data.",
            "usage": {
              "prompt_tokens": 322,
              "completion_tokens": 9,
              "total_tokens": 331
            }
          }
        },
        {
          "primaryAgent": {
            "title": "Moulin Rouge! The Musical",
            "body": "Great value seats now available from £28. Act fast!",
            "inAppMessage": "Moulin Rouge! The Musical: Great seats at £28.",
            "usage": {
              "prompt_tokens": 941,
              "completion_tokens": 119,
              "total_tokens": 1060
            }
          },
          "evaluatorAgent": {
            "response": "VALID: Matches lowPriceForRegularTickets and canShowDiscountPercentage=true.",
            "usage": {
              "prompt_tokens": 322,
              "completion_tokens": 15,
              "total_tokens": 337
            }
          }
        },
        {
          "primaryAgent": {
            "title": "Moulin Rouge! The Musical",
            "body": "Great value seats available! Get your tickets from £28.",
            "inAppMessage": "Moulin Rouge! Get tickets from £28.",
            "usage": {
              "prompt_tokens": 941,
              "completion_tokens": 117,
              "total_tokens": 1058
            }
          },
          "evaluatorAgent": {
            "response": "VALID: Numbers and % symbol usage match source data.",
            "usage": {
              "prompt_tokens": 322,
              "completion_tokens": 11,
              "total_tokens": 333
            }
          }
        }
      ],
      "hallucination_summary": {
        "status": "PASS",
        "hallucinations_detected": 0,
        "total_iterations": 3
      }
    },
    {
      "testName": "test a basic case, SIX with low price drop",
      "testDescription": "The show \"SIX\" has a new lowest price of $59 which is a $20 reduction. It also has a new max discount percent of 39% up from no max discount percent. The max discount percent has a promotion tied to it \"Exclusive discount for TodayTix only\".",
      "iterations": [
        {
          "primaryAgent": {
            "title": "SIX",
            "body": "Catch SIX with exclusive discounts just for you.",
            "inAppMessage": "SIX exclusive discounts just for you",
            "usage": {
              "prompt_tokens": 980,
              "completion_tokens": 111,
              "total_tokens": 1091
            }
          },
          "evaluatorAgent": {
            "response": "VALID: Matches data, can show discount percentage.",
            "usage": {
              "prompt_tokens": 350,
              "completion_tokens": 10,
              "total_tokens": 360
            }
          }
        },
        {
          "primaryAgent": {
            "title": "SIX",
            "body": "Get tickets now at a new low price of $59.",
            "inAppMessage": "SIX now at a new low price of $59",
            "usage": {
              "prompt_tokens": 980,
              "completion_tokens": 121,
              "total_tokens": 1101
            }
          },
          "evaluatorAgent": {
            "response": "VALID: Low price matches source data, % symbol not shown.",
            "usage": {
              "prompt_tokens": 353,
              "completion_tokens": 13,
              "total_tokens": 366
            }
          }
        },
        {
          "primaryAgent": {
            "title": "SIX",
            "body": "Get tickets now at a new low price of $39.",
            "inAppMessage": "SIX now from $39 for all members.",
            "usage": {
              "prompt_tokens": 980,
              "completion_tokens": 108,
              "total_tokens": 1088
            }
          },
          "evaluatorAgent": {
            "response": "HALLUCINATION: Push shows $39, but low price is $59.",
            "usage": {
              "prompt_tokens": 353,
              "completion_tokens": 17,
              "total_tokens": 370
            }
          }
        }
      ],
      "hallucination_summary": {
        "status": "FAIL",
        "hallucinations_detected": 1,
        "total_iterations": 3
      }
    },
    {
      "testName": "test a last call show alert for a show that has announced closure",
      "testDescription": "The show \"Wicked\" is announcing its closing on January 1, 2026, after starting on October 30, 2003, in the US. Regular ticket prices start at $50, and there is a possibility of showing a discount percentage.",
      "iterations": [
        {
          "primaryAgent": {
            "title": "Wicked",
            "body": "Catch Wicked before it closes in January 2026. Final bow approaching!",
            "inAppMessage": "Wicked is closing soon, don't miss it!",
            "usage": {
              "prompt_tokens": 933,
              "completion_tokens": 115,
              "total_tokens": 1048
            }
          },
          "evaluatorAgent": {
            "response": "VALID: Notification matches JSON data, no numbers or % mentioned.",
            "usage": {
              "prompt_tokens": 309,
              "completion_tokens": 13,
              "total_tokens": 322
            }
          }
        },
        {
          "primaryAgent": {
            "title": "Wicked",
            "body": "Experience the magic before it ends! Wicked is closing on January 1, 2026. Get tickets from $50 now.",
            "inAppMessage": "Wicked closing on January 1, 2026. Tickets from $50.",
            "usage": {
              "prompt_tokens": 933,
              "completion_tokens": 135,
              "total_tokens": 1068
            }
          },
          "evaluatorAgent": {
            "response": "VALID: All numbers match source data; % symbol not shown.",
            "usage": {
              "prompt_tokens": 320,
              "completion_tokens": 13,
              "total_tokens": 333
            }
          }
        },
        {
          "primaryAgent": {
            "title": "Wicked",
            "body": "Don't miss your chance! Wicked will close January 1, 2026. Get tickets from $50.",
            "inAppMessage": "Wicked: Closing on January 1, 2026. Tickets from $50.",
            "usage": {
              "prompt_tokens": 933,
              "completion_tokens": 137,
              "total_tokens": 1070
            }
          },
          "evaluatorAgent": {
            "response": "VALID: All numbers match source data, % symbol not shown.",
            "usage": {
              "prompt_tokens": 316,
              "completion_tokens": 13,
              "total_tokens": 329
            }
          }
        }
      ],
      "hallucination_summary": {
        "status": "PASS",
        "hallucinations_detected": 0,
        "total_iterations": 3
      }
    },
    {
      "testName": "test a case where max discount percentage is the same as the diff",
      "testDescription": "changes: lowestPrice 15, diff of 8 and no promotion, maxDiscountPercentage 39% diff is 39",
      "iterations": [
        {
          "primaryAgent": {
            "title": "The Play That Goes Wrong",
            "body": "Get tickets now at a new low price of £15.",
            "inAppMessage": "The Play That Goes Wrong £15 tickets.",
            "usage": {
              "prompt_tokens": 987,
              "completion_tokens": 112,
              "total_tokens": 1099
            }
          },
          "evaluatorAgent": {
            "response": "VALID: Matches lowPriceForRegularTickets £15, canShowDiscountPercentage=true.",
            "usage": {
              "prompt_tokens": 366,
              "completion_tokens": 17,
              "total_tokens": 383
            }
          }
        },
        {
          "primaryAgent": {
            "title": "The Play That Goes Wrong",
            "body": "Get tickets now at a new low price of £15.",
            "inAppMessage": "The Play That Goes Wrong tickets now at £15.",
            "usage": {
              "prompt_tokens": 987,
              "completion_tokens": 114,
              "total_tokens": 1101
            }
          },
          "evaluatorAgent": {
            "response": "VALID: Numbers match source data, and % symbol is shown correctly.",
            "usage": {
              "prompt_tokens": 366,
              "completion_tokens": 14,
              "total_tokens": 380
            }
          }
        },
        {
          "primaryAgent": {
            "title": "The Play That Goes Wrong",
            "body": "Get tickets now at a new low price of £15.",
            "inAppMessage": "The Play That Goes Wrong now at £15.",
            "usage": {
              "prompt_tokens": 987,
              "completion_tokens": 116,
              "total_tokens": 1103
            }
          },
          "evaluatorAgent": {
            "response": "VALID: Matches low price £15, % symbol allowed",
            "usage": {
              "prompt_tokens": 366,
              "completion_tokens": 11,
              "total_tokens": 377
            }
          }
        }
      ],
      "hallucination_summary": {
        "status": "PASS",
        "hallucinations_detected": 0,
        "total_iterations": 3
      }
    },
    {
      "testName": "test uk case where there is a promotion and a price change",
      "testDescription": "The show \"The Lehman Trilogy\" now has a new lowest price for regular tickets at £23, which is a £5 reduction. There is an exclusive pricing promotion with highlighted dates offering TodayTix exclusive prices.",
      "iterations": [
        {
          "primaryAgent": {
            "title": "The Lehman Trilogy",
            "body": "Tickets now available from £23 with exclusive pricing.",
            "inAppMessage": "The Lehman Trilogy tickets from £23",
            "usage": {
              "prompt_tokens": 989,
              "completion_tokens": 117,
              "total_tokens": 1106
            }
          },
          "evaluatorAgent": {
            "response": "VALID: Matches lowPriceForRegularTickets and canShowDiscountPercentage is true.",
            "usage": {
              "prompt_tokens": 365,
              "completion_tokens": 16,
              "total_tokens": 381
            }
          }
        },
        {
          "primaryAgent": {
            "title": "The Lehman Trilogy",
            "body": "Exclusive pricing on tickets, starting at £23. Book your seats now!",
            "inAppMessage": "The Lehman Trilogy: Exclusive pricing from £23.",
            "usage": {
              "prompt_tokens": 989,
              "completion_tokens": 117,
              "total_tokens": 1106
            }
          },
          "evaluatorAgent": {
            "response": "VALID: Price matches lowPriceForRegularTickets (£23) and no % symbol shown.",
            "usage": {
              "prompt_tokens": 370,
              "completion_tokens": 18,
              "total_tokens": 388
            }
          }
        },
        {
          "primaryAgent": {
            "title": "The Lehman Trilogy",
            "body": "Tickets now at an exclusive low price of £23 for highlighted dates.",
            "inAppMessage": "The Lehman Trilogy: tix from £23 for special dates",
            "usage": {
              "prompt_tokens": 989,
              "completion_tokens": 126,
              "total_tokens": 1115
            }
          },
          "evaluatorAgent": {
            "response": "VALID: Price matches lowPriceForRegularTickets and no % symbol shown.",
            "usage": {
              "prompt_tokens": 369,
              "completion_tokens": 15,
              "total_tokens": 384
            }
          }
        }
      ],
      "hallucination_summary": {
        "status": "PASS",
        "hallucinations_detected": 0,
        "total_iterations": 3
      }
    },
    {
      "testName": "test uk case where there is a promotion only, mousetrap",
      "testDescription": "The show \"The Mousetrap\" has regular ticket prices starting at £28. A promotion titled \"Tix Selling Fast\" has been added, indicating that tickets are selling quickly, with the lowest price point for this promotion being £35.",
      "iterations": [
        {
          "primaryAgent": {
            "title": "The Mousetrap",
            "body": "Catch The Mousetrap with tix from £28, they're selling fast!",
            "inAppMessage": "The Mousetrap: tix from £28, act fast!",
            "usage": {
              "prompt_tokens": 936,
              "completion_tokens": 131,
              "total_tokens": 1067
            }
          },
          "evaluatorAgent": {
            "response": "HALLUCINATION: Mentions £28 but lowestPricePoint is £35",
            "usage": {
              "prompt_tokens": 318,
              "completion_tokens": 16,
              "total_tokens": 334
            }
          }
        },
        {
          "primaryAgent": {
            "title": "The Mousetrap",
            "body": "Get tickets now with special promos starting from £28.",
            "inAppMessage": "The Mousetrap: tix from £28!",
            "usage": {
              "prompt_tokens": 936,
              "completion_tokens": 115,
              "total_tokens": 1051
            }
          },
          "evaluatorAgent": {
            "response": "HALLUCINATION: Claims special promos, but no promo price matches £28.",
            "usage": {
              "prompt_tokens": 313,
              "completion_tokens": 17,
              "total_tokens": 330
            }
          }
        },
        {
          "primaryAgent": {
            "title": "The Mousetrap",
            "body": "Get ready to catch The Mousetrap. Tickets from £28.",
            "inAppMessage": "The Mousetrap: Tickets from £28",
            "usage": {
              "prompt_tokens": 936,
              "completion_tokens": 117,
              "total_tokens": 1053
            }
          },
          "evaluatorAgent": {
            "response": "VALID: Numbers match source data, and % symbol is not shown.",
            "usage": {
              "prompt_tokens": 316,
              "completion_tokens": 14,
              "total_tokens": 330
            }
          }
        }
      ],
      "hallucination_summary": {
        "status": "FAIL",
        "hallucinations_detected": 2,
        "total_iterations": 3
      }
    },
    {
      "testName": "test uk case where there is a promotion and a discount % change",
      "testDescription": "The show \"Why Am I So Single?\" offers regular tickets starting at £25. A new promotion has been introduced, allowing a maximum discount of 40%, which is an increase of 7% from the previous maximum discount. Additionally, there is a special offer with the lowest price point set at £30. These promotions are targeted at Gold Members.",
      "iterations": [
        {
          "primaryAgent": {
            "title": "Why Am I So Single?",
            "body": "Gold Members: Special offer on tix from £30!",
            "inAppMessage": "Why Am I So Single? Gold Members special offer £30 tix",
            "usage": {
              "prompt_tokens": 975,
              "completion_tokens": 129,
              "total_tokens": 1104
            }
          },
          "evaluatorAgent": {
            "response": "HALLUCINATION: Mention of £30 doesn't match lowPriceForRegularTickets (£25).",
            "usage": {
              "prompt_tokens": 354,
              "completion_tokens": 19,
              "total_tokens": 373
            }
          }
        },
        {
          "primaryAgent": {
            "title": "Why Am I So Single?",
            "body": "Special offer: Gold Member tix now only £25.",
            "inAppMessage": "Why Am I So Single? Gold Member offer £25.",
            "usage": {
              "prompt_tokens": 975,
              "completion_tokens": 121,
              "total_tokens": 1096
            }
          },
          "evaluatorAgent": {
            "response": "HALLUCINATION: Price should be £30, not £25.",
            "usage": {
              "prompt_tokens": 354,
              "completion_tokens": 15,
              "total_tokens": 369
            }
          }
        },
        {
          "primaryAgent": {
            "title": "Why Am I So Single?",
            "body": "Special offer for Gold Members. Get tix from £30!",
            "inAppMessage": "Why Am I So Single? Special offer for Gold Members!",
            "usage": {
              "prompt_tokens": 975,
              "completion_tokens": 122,
              "total_tokens": 1097
            }
          },
          "evaluatorAgent": {
            "response": "HALLUCINATION: No mention of 40% discount in the notification.",
            "usage": {
              "prompt_tokens": 355,
              "completion_tokens": 16,
              "total_tokens": 371
            }
          }
        }
      ],
      "hallucination_summary": {
        "status": "FAIL",
        "hallucinations_detected": 3,
        "total_iterations": 3
      }
    },
    {
      "testName": "test a basic case of promotion only",
      "testDescription": "The show \"Six\" has regular ticket prices starting at $59. A promotion titled \"Hot deal\" has been added, highlighting dates with special offers. The promotion includes a lowest price point of $59, a maximum discount amount of $22, and a maximum discount percentage of 45%.",
      "iterations": [
        {
          "primaryAgent": {
            "title": "Six",
            "body": "Catch Six with our Hot deal and enjoy highlighted dates from $59.",
            "inAppMessage": "Six Hot deal starts at $59.",
            "usage": {
              "prompt_tokens": 1009,
              "completion_tokens": 113,
              "total_tokens": 1122
            }
          },
          "evaluatorAgent": {
            "response": "VALID: All numbers match source data, % not mentioned.",
            "usage": {
              "prompt_tokens": 383,
              "completion_tokens": 12,
              "total_tokens": 395
            }
          }
        },
        {
          "primaryAgent": {
            "title": "Six",
            "body": "Hot deal on Six tix, check highlighted dates for offers.",
            "inAppMessage": "Six: Hot deal on tix.",
            "usage": {
              "prompt_tokens": 1009,
              "completion_tokens": 100,
              "total_tokens": 1109
            }
          },
          "evaluatorAgent": {
            "response": "HALLUCINATION: Missing price/discount details in notification",
            "usage": {
              "prompt_tokens": 382,
              "completion_tokens": 12,
              "total_tokens": 394
            }
          }
        },
        {
          "primaryAgent": {
            "title": "Six",
            "body": "Hot deal on tickets! Check out highlighted dates for exclusive offers.",
            "inAppMessage": "Six: Hot deal on tix! Check offers now.",
            "usage": {
              "prompt_tokens": 1009,
              "completion_tokens": 107,
              "total_tokens": 1116
            }
          },
          "evaluatorAgent": {
            "response": "HALLUCINATION: No price or % mentioned in the push notification.",
            "usage": {
              "prompt_tokens": 382,
              "completion_tokens": 15,
              "total_tokens": 397
            }
          }
        }
      ],
      "hallucination_summary": {
        "status": "FAIL",
        "hallucinations_detected": 2,
        "total_iterations": 3
      }
    }
  ]};

        // Load and display the data
        document.addEventListener('DOMContentLoaded', () => {
            displayResults(testData.results);
        });
    </script>
</body>
</html>